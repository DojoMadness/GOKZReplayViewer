<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title>GOKZ Replay Viewer</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/base64-string.min.js"></script>
        <script src="${BASEURL}/js/facepunch.webgame.js?v=${VERSION}"></script>
        <script src="${BASEURL}/js/sourceutils.js?v=${VERSION}"></script>
        <script src="${BASEURL}/js/replayviewer.js?v=${VERSION}"></script>
        <link type="text/css" rel="stylesheet" href="${BASEURL}/styles/mapviewer.css?v=${VERSION}" />
        <link type="text/css" rel="stylesheet" href="${BASEURL}/styles/replayviewer.css?v=${VERSION}" />
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            }

            #map-view {
                position: absolute;
                top: 72px;
                left: 32px;
                right: 32px;
                bottom: 32px;
                background-color: black;
            }
        </style>
    </head>
    <body>
    <h2 id="title">GOKZ Replay Viewer</h2>
    <div id="map-view">
        <script>
            var viewer;
            window.onload = function() {
                viewer = new ReplayViewer(document.getElementById("map-view"));
                viewer.setMapBaseUrl("${MAPSURL}");

                var searchParams = new URLSearchParams(window.location.search);
                var replayUrl = searchParams.get("replay");

                if (replayUrl != null) {
                    viewer.loadReplay(decodeURIComponent(replayUrl));
                    viewer.animate();
                } else {
                    viewer.showMessage("No replay URL provided");
                }
            }
        </script>
    </div>
    </body>
</html>
